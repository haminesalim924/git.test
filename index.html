 <!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Site HTML5 Avancé</title>

    <style>
        * {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background-color: #2980b9;
        }

        .canvas-container {
            text-align: center;
        }

        canvas {
            border: 1px solid #ddd;
            background-color: #f9f9f9;
        }
    </style>
</head>

<body>

<h1>Mon Aventure avec HTML5 Avancé</h1>

<section id="microdata">
    <h2>1. Qui suis-je ? (Microdata)</h2>
    <div itemscope itemtype="http://schema.org/Person">
        <p><strong>Nom :</strong> <span itemprop="name">Hamine salim</span></p>
        <p><strong>Métier :</strong> <span itemprop="jobTitle">ingenieur</span></p>
        <p><strong>Compétences :</strong> <span itemprop="knowsAbout">HTML5, CSS3, JavaScript</span></p>
        <p><strong>Email :</strong> <span itemprop="email">haminesalim924@gmail.com</span></p>
    </div>
</section>

<section id="canvas">
    <h2>2. Mon Avatar (Canvas)</h2>
    <div class="canvas-container">
        <canvas id="monCanvas" width="200" height="200"></canvas><br>
        <button onclick="dessinerAvatar()">Dessiner mon avatar</button>
        <button onclick="effacerCanvas()">Effacer</button>
    </div>
</section>

<section id="webworker">
    <h2>3. Calculatrice Intelligente (Web Workers)</h2>
    <p>Calculons la somme des nombres de 1 à :</p>
    <input type="number" id="nombreInput" value="1000000">
    <button onclick="demarrerCalcul()">Calculer</button>
    <button onclick="arreterCalcul()">Arrêter</button>
    <p id="resultatWorker">Résultat apparaîtra ici...</p>
    <p id="statusWorker"></p>
</section>

<section id="localstorage">
    <h2>4. Préférences (Local Storage)</h2>
    <button onclick="changerTheme('clair')">Thème Clair</button>
    <button onclick="changerTheme('sombre')">Thème Sombre</button>
    <button onclick="effacerPreference()">Effacer ma préférence</button>
    <p id="infoTheme"></p>
</section>

<section id="geolocalisation">
    <h2>5. Où suis-je ? (API Géolocalisation)</h2>
    <button onclick="obtenirPosition()">Obtenir ma position</button>
    <button onclick="simulerPosition()">Simuler une position</button>
    <div id="positionResultat"></div>
</section>

<footer style="text-align:center; margin-top:40px; color:#7f8c8d;">
    <p>Exercice HTML5 avancé pour débutants</p>
</footer>

<script>
function dessinerAvatar() {
    const canvas = document.getElementById('monCanvas')
    const ctx = canvas.getContext('2d')
    ctx.clearRect(0,0,200,200)
    ctx.fillStyle = '#FFD700'
    ctx.beginPath()
    ctx.arc(100,100,80,0,Math.PI*2)
    ctx.fill()
    ctx.fillStyle = '#000'
    ctx.beginPath()
    ctx.arc(70,80,10,0,Math.PI*2)
    ctx.arc(130,80,10,0,Math.PI*2)
    ctx.fill()
    ctx.beginPath()
    ctx.arc(100,120,40,0,Math.PI)
    ctx.stroke()
    ctx.fillStyle = '#3498db'
    ctx.font = '16px Arial'
    ctx.fillText('Hello!',85,180)
}

function effacerCanvas() {
    const canvas = document.getElementById('monCanvas')
    const ctx = canvas.getContext('2d')
    ctx.clearRect(0,0,200,200)
}

let monWorker = null

function demarrerCalcul() {
    const nombre = document.getElementById('nombreInput').value
    document.getElementById('statusWorker').textContent = 'Calcul en cours...'
    monWorker = new Worker('worker.js')
    monWorker.postMessage(nombre)
    monWorker.onmessage = function(e) {
        document.getElementById('resultatWorker').textContent = 'Résultat : ' + e.data
        document.getElementById('statusWorker').textContent = 'Calcul terminé'
    }
}

function arreterCalcul() {
    if(monWorker){
        monWorker.terminate()
        document.getElementById('statusWorker').textContent = 'Calcul arrêté'
        monWorker = null
    }
}

function changerTheme(theme) {
    if(theme === 'sombre'){
        document.body.style.backgroundColor = '#2c3e50'
        document.body.style.color = '#ecf0f1'
        localStorage.setItem('themePrefere','sombre')
    } else {
        document.body.style.backgroundColor = '#f5f5f5'
        document.body.style.color = '#333'
        localStorage.setItem('themePrefere','clair')
    }
}

function effacerPreference() {
    localStorage.removeItem('themePrefere')
}

function obtenirPosition() {
    navigator.geolocation.getCurrentPosition(function(position){
        document.getElementById('positionResultat').textContent =
            position.coords.latitude + ' , ' + position.coords.longitude
    })
}

function simulerPosition() {
    document.getElementById('positionResultat').textContent = '48.8566 , 2.3522'
}

window.onload = function() {
    dessinerAvatar()
    const t = localStorage.getItem('themePrefere')
    if(t) changerTheme(t)
}
</script>

</body>
</html>
